<div
  *ngIf="loading"
  class="container d-flex h-50 flex-column justify-content-center"
  style="min-height: 640px;"
>
  <img src="assets/img/loader.svg" height="36px" alt="Loader" />
</div>
<div *ngIf="!loading && !jobStateCheck">
  <div class="col-sm-8 offset-sm-2 col-12 text-center createWallet">
    <img
      src="/assets/img/CanYa_red_cross.svg"
      class="img-responsiveness mt-10 animated bounceInUp"
      width="150"
    />
    <h2>Unauthorized</h2>
    <p class="lead fw-400">
      It seems like you're trying to initiate payment for this job even though
      it's already paid, or is processing its payment.
    </p>
    <p class="text-center">
      <a class="btn btn-secondary" [routerLink]="['/inbox/job', this.job.id]"
        >Return</a
      >
    </p>
  </div>
</div>


<div *ngIf="!loading && showBscAssetSelection" class="container">
  <app-bsc-payment-selector
    [jobBudgetUsd]="jobBudgetUsd"
    [jobId]="job.id"
    (bscAsset)="assetDataHandler.asset($event)"
  ></app-bsc-payment-selector>
</div>

<div *ngIf="paymentMethod && !showBscAssetSelection">
  <div
    *ngIf="!bscPayOptions"
    class="container d-flex h-100 flex-column justify-content-center"
    style="min-height: 640px;"
  >
    <img src="assets/img/loader.svg" height="36px" alt="Loader" />
  </div>
  
  
  <div class="card px-30 py-30 row mh-250">
    <div *ngIf="bscPayOptions && bscPayOptions.paymentSummary" class="container text-center">
      <div *ngIf="showBalance && balance < amount" class="alert alert-warning">
        <i class="fas fa-exclamation-triangle"></i> You do not have enough tokens
        to process this transaction
      </div>
      <div class="row mb-15">
        <div class="col-8 text-left">
          <i class="fas fa-shopping-cart"></i> Your order summary
        </div>
      </div>
      <div class="row">
        <div class="col-8 text-left">
          <span class="fw-600">{{ bscPayOptions.paymentSummary.job.name }}</span>
        </div>
        <div class="col-4 text-right">
          <span>
            $ {{ bscPayOptions.paymentSummary.job.usdValue }} USD in
            <span class="fs-12">
              {{ assetSymbolShort }}
            </span>
          </span>
        </div>
      </div>
      <hr class="mb-5 mt-20" />
      <div class="row">
        <div class="col-8 text-left">
          <span class="fw-600">Total:</span>
        </div>
        <div class="col-4 text-right">
          <span>
            <span class="fw-500 fs-20">$ {{ bscPayOptions.paymentSummary.job.usdValue }} </span>
            <span class="fs-12">
              USD
            </span>
          </span>
        </div>
      </div>
      <div class="row">
        <div class="col-8 text-left">
          <span class="fw-400"
            >{{ assetSymbolShort }} = $
            {{ bscPayOptions.paymentSummary.asset.usdPrice | number: '1.3-3' }}</span
          >
        </div>
        <div class="col-4 text-right">
          <span class="fw-500 fs-20">{{ this.formatAssetJobBudget }} </span>
          <span class="fs-12">
            <img
              src="{{ bscPayOptions.paymentSummary.asset.iconURL }}"
              width="14px"
              height="14px"
              alt="{{ assetSymbolShort }}"
            />
            {{ assetSymbolShort }}
          </span>
        </div>
      </div>
      <div class="row mt-35" *ngIf="showBalance">
        <div class="col-8 text-left">
          <span class="fw-600">Wallet Balance</span>
        </div>
        <div class="col-4 text-right">
          <span class="fw-500 fs-20">{{ balance }} </span>
          <span class="fs-12">
            <img
              src="assets/img/canya-media-coin.png"
              width="12px"
              height="12px"
              alt="CanYa"
            />
            CAN
          </span>
        </div>
      </div>
    </div>
  </div>
  
  <div class="text-right m-30 float-right float-right">
    <img
      *ngIf="isEscrowProcessing"
      src="assets/img/loader.svg"
      height="36px"
      alt="Loader"
    />
    <button class="btn btn-primary" [disabled]="isEscrowProcessing" (click)="next()">
      NEXT
    </button>
  </div>

</div>
