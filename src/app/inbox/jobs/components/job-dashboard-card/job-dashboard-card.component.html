<!-- <div
  class="card mb-15 p-20 pointer job-dashboard-card"
  *ngIf="type === 'lg' && !isPublic"
>
  <div class="container jobs-info job-info-lg">
    <div class="row">
      <div class="col-md-9 col-sm-8">
        <div class="row job-desc">
          <div class="col-12" [routerLink]="['/inbox/job', job.id]">
            <h4>{{ job.information.title }}</h4>
            <div class="hide-mobile">
              <app-skill-tag
                *ngFor="let skill of job.information.skills"
                [skill]="skill"
              ></app-skill-tag>
            </div>
            <p *ngIf="job.information.description.length < 160">
              {{ job.information.description }}
            </p>
            <p *ngIf="job.information.description.length > 160">
              {{ job.information.description.substring(0, 160) }}...
            </p>
          </div>
          <div class="col-12">
            <div
              class="otherPartyName pointer"
              *ngIf="job.otherParty?.avatar && job.otherParty?.avatar?.uri"
              [routerLink]="['/profile/alt/', job.otherParty.id]"
            >
              <app-avatar
                [user]="job.otherParty"
                [customClass]="'headshot-div'"
              ></app-avatar>
              <p>
                {{ job.otherParty?.name
                }}<app-verified-mark
                  [user]="job.otherParty"
                ></app-verified-mark>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-4 job-details">
        <div class="row info-row">
          <div class="info-details col-sm-12 hide-mobile">
            <p>Status</p>
            <app-status-icon
              [job]="job"
              [currentUserType]="userType"
            ></app-status-icon>
          </div>
          <div class="info-details col-sm-12 col-6">
            <p>
              {{ job.paymentType }}
            </p>
            <b>
              <app-budget [job]="job"></app-budget>
            </b>
          </div>
          <div class="info-details col-sm-12 col-6">
            <p>Timeline</p>
            <b>{{ job.information.timelineExpectation }}</b>
          </div>
        </div>
        <div>
          <button
            [routerLink]="['/inbox/job', job.id]"
            class="btn btn-primary btn-outline view-job-btn"
          >
            VIEW JOB
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="card mb-15 p-20 pointer job-dashboard-card"
  *ngIf="type === 'sm' && !isPublic"
>
  <div class="container jobs-info job-info-sm">
    <div class="row">
      <div class="col-md-9 col-sm-8">
        <div class="row job-desc">
          <div class="col-12" [routerLink]="['/inbox/job', job.id]">
            <h4>{{ job.information.title }}</h4>
            <p *ngIf="job.information.description.length < 60">
              {{ job.information.description }}
            </p>
            <p *ngIf="job.information.description.length > 60">
              {{ job.information.description.substring(0, 60) }}
            </p>
          </div>
          <div class="col-12">
            <div
              *ngIf="job.otherParty?.avatar && job.otherParty?.avatar?.uri"
              class="otherPartyName pointer"
              [routerLink]="['/profile/alt/', job.otherParty.id]"
            >
              <app-avatar
                [user]="job.otherParty"
                [customClass]="'headshot-div'"
              ></app-avatar>
              <p>
                {{ job.otherParty?.name
                }}<app-verified-mark
                  [user]="job.otherParty"
                ></app-verified-mark>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-4 job-details">
        <div class="row info-row">
          <div class="info-details col-sm-12 hide-mobile">
            <p>Status</p>
            <app-status-icon
              [job]="job"
              [currentUserType]="userType"
            ></app-status-icon>
          </div>
          <div class="info-details col-sm-12 col-6">
            <p>
              {{ job.paymentType }}
            </p>
            <b>
              <app-budget [job]="job"></app-budget>
            </b>
          </div>
          <div class="info-details col-sm-12 col-6">
            <p>Timeline</p>
            <b>{{ job.information.timelineExpectation }}</b>
          </div>
          <button
            [routerLink]="['/inbox/job', job.id]"
            class="btn btn-primary btn-outline view-job-btn hide-mobile"
          >
            VIEW JOB
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
 -->
<!-- 
  This is for public job offers - e.g. client receiving provider offers,
  hence the impossible job.workType ngIf above. this should save us some time...
  uncomment this once the basic features has been implemented.
 -->
<!-- 
<div
  class="card mb-15 p-20 pointer job-dashboard-card"
  *ngIf="job.workType === 'public-job-type-prototype' && type === 'offer'"
>
  <div class="container provider-job-card jobs-info">
    <app-avatar
      [user]="job.otherParty"
      [customClass]="'headshot-div'"
    ></app-avatar>
    <div class="row">
      <div
        class="col-md-3 offset-md-1 col-sm-4 col-12"
        [routerLink]="['/inbox/job', job.id]"
      >
        <h4>
          {{ job.otherParty?.name
          }}<app-verified-mark [user]="job.otherParty"></app-verified-mark>
        </h4>
      </div>
      <div class="col-sm-2 hide-mobile">
        <p>
          {{ job.paymentType }}
        </p>
      </div>
      <div class="col-sm-2 hide-mobile">
        <p>Timeline</p>
      </div>
      <div class="col-sm-4 text-right">
        <button class="btn btn-primary btn-canya-chat">
          LET'S CHAT
        </button>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 offset-md-1 col-sm-4 col-12">
        <p>{{ job.information.title }}</p>
      </div>
      <div class="col-sm-2 col-6">
        <p>
          <b>
            <app-budget [job]="job"></app-budget>
          </b>
        </p>
      </div>
      <div class="col-sm-2 col-6">
        <b>{{ job.information.timelineExpectation }}</b>
      </div>
    </div>
    <div class="row">
      <div class="col-md-11 offset-md-1 col-12">
        <app-skill-tag
          *ngFor="let skill of job.information.skills"
          [skill]="skill"
        ></app-skill-tag>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-8 offset-sm-1 col-12">
        <p>
          {{ job.information.description }}
        </p>
      </div>
      <div class="col-sm-3 col-12 text-right btn-div mobile-center">
        <button class="btn btn-success">
          ACCEPT
        </button>
        <button class="btn btn-secondary">
          DECLINE
        </button>
      </div>
    </div>
  </div>
</div>
<div
  class="card mb-15 p-20 pointer job-dashboard-card"
  *ngIf="type === 'lg' && isPublic"
>
  <div class="container jobs-info job-info-lg">
    <div class="row">
      <div class="col-md-9 col-sm-8">
        <div class="row job-desc">
          <div class="col-12" [routerLink]="['/jobs', job.id]">
            <h4>{{ job.information.title }}</h4>
            <app-skill-tag
              *ngFor="let skill of job.information.skills"
              [skill]="skill"
            ></app-skill-tag>
            <p *ngIf="job.information.description.length < 160">
              {{ job.information.description }}
            </p>
            <p *ngIf="job.information.description.length > 160">
              {{ job.information.description.substring(0, 160) }}...
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-4 job-details">
        <div class="row info-row">
          <div class="info-details col-sm-12 col-6">
            <p>Status</p>
            <app-status-icon
              [job]="job"
              [currentUserType]="userType"
            ></app-status-icon>
          </div>
          <div class="info-details col-sm-12 col-6">
            <p>
              {{ job.paymentType }}
            </p>
            <b>
              <app-budget [job]="job"></app-budget>
            </b>
          </div>
          <div class="info-details col-sm-12 col-6">
            <p>Deadline</p>
            <b>{{ job.deadline }}</b>
          </div>
        </div>
        <div>
          <button
            [routerLink]="['/jobs', job.id]"
            class="btn btn-primary btn-outline view-job-btn"
          >
            VIEW JOB
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
 -->

<div
  class="w-full rounded-[12px] overflow-hidden bg-white p-[32px] grid gap-4 border border-G200 hover:bg-G100 active:bg-G200 cursor-pointer my-[16px]"
  (click)="movetojobdetail()"
>
  <div class="flex justify-between gap-5">
    <div class="w-full flex gap-6 items-center">
      <img
        *ngIf="job.information.providerType"
        src="{{ getImage(job.information.providerType) }}"
        class="w-[48px] h-[48px]"
      />
      <div class="grid gap-1">
        <div class="text-G900 text-h6 font-medium">
          {{ job.information.title }}
        </div>
        <div class="text-G500 text-b2">Posted {{ timeAgo(job.createAt) }}</div>
      </div>
    </div>

    <div
      *ngIf="jobType == 'public'"
      class="border rounded-md border-G300 w-[32px] h-[32px] flex items-center justify-center cursor-pointer transition-all duration-150"
      [ngClass]="{
        'bg-white hover:bg-G100': !favourite,
        'bg-start-g1 hover:bg-start-g8': favourite
      }"
      (click)="Makefavorite($event)"
    >
      <img src="/assets/massimo/svg/bookmark.svg" class="select-none" />
    </div>

    <ng-container *ngIf="jobType == 'draft'">
      <div class="flex gap-4 items-center">
        <div
          class="cursor-pointer py-[10px] px-[24px] text-[#D1242F] flex justify-center items-center gap-2 font-medium text-b1 text-nowrap hover:bg-G200 rounded-xl"
          (click)="updateDialog($event)"
        >
          <img
            src="/assets/massimo/svg/delete.svg"
            class="select-none w-[16px] h-[16px]"
          />
          Delete Job
        </div>

        <basic-button
          type="1"
          [routerLink]="['/inbox/job/edit', job.id]"
          title="Edit Job"
          size="small"
          extraClass="border text-G900"
        />
      </div>
    </ng-container>
  </div>

  <div class="line-clamp-4">
    {{ stripHtmlTags(job.information.description) }}
  </div>
  <!-- static code for responsive -->
  <div class="flex items-center gap-4">
    <ng-container *ngFor="let item of job.information.skills; let i = index">
      <basic-tag
        *ngIf="8 > i"
        [type]="2"
        [title]="item"
        class="max-xl:hidden"
      />
      <basic-tag
        *ngIf="4 > i"
        [type]="2"
        [title]="item"
        class="max-md:hidden xl:hidden"
      />
      <basic-tag *ngIf="2 > i" [type]="2" [title]="item" class="md:hidden" />
    </ng-container>
    <basic-tag
      *ngIf="job.information.skills.length > 8"
      [type]="2"
      [title]="'+' + (job.information.skills.length - 8)"
      class="max-xl:hidden"
    ></basic-tag>
    <basic-tag
      *ngIf="job.information.skills.length > 4"
      [type]="2"
      [title]="'+' + (job.information.skills.length - 4)"
      class="max-md:hidden xl:hidden"
    ></basic-tag>
    <basic-tag
      *ngIf="job.information.skills.length > 2"
      [type]="2"
      [title]="'+' + (job.information.skills.length - 2)"
      class="md:hidden"
    ></basic-tag>
  </div>

  <div
    class="max-xl:grid max-sm:grid-cols-1 max-xl:grid-cols-2 flex gap-2 items-start text-nowrap"
  >
    <div class="flex gap-2 items-center">
      <img src="/assets/massimo/svg/jobLocation.svg" class="select-none" />
      <div class="text-G500 text-b2">Location</div>
      <!-- to do google address -->
      <div class="text-G700 text-b1 font-medium">San Franciso</div>
    </div>
    <div class="flex gap-2 items-center">
      <img src="/assets/massimo/svg/jobBudget.svg" class="select-none" />
      <div class="text-G500 text-b2">
        {{ job.paymentType }}
      </div>
      <div class="text-G700 text-b1 font-medium">
        <app-budget [job]="job"></app-budget>
      </div>
    </div>
    <div class="flex gap-2 items-center">
      <img src="/assets/massimo/svg/jobDeadline.svg" class="select-none" />
      <div class="text-G500 text-b2">Project Deadline</div>
      <div class="text-G700 text-b1 font-medium">
        {{ formatDate(job.deadline) }}
      </div>
    </div>
    <div class="flex gap-2 items-center">
      <img src="/assets/massimo/svg/jobProposals.svg" class="select-none" />
      <div class="text-G500 text-b2">Proposals:</div>
      <div class="text-G700 text-b1 font-medium">20 proposals</div>
    </div>
  </div>
</div>

<base-dialog
  [visible]="visible"
  title="Are you sure you want to delete ?"
  content="If you delete job post, you will no longer have access to it or receive bids from freelancers. You  can create a new job listing to receive bids."
  (LeftbtnEvent)="cancelJob($event)"
  (RightbtnEvent)="updateDialog($event)"
  type="delete"
/>
